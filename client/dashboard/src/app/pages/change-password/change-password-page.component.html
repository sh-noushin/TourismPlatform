<div class="dialog-shell" (click)="$event.stopPropagation()">
  <div class="glass-panel">
    <header class="header">
      <h3>{{ 'CHANGE_PASSWORD_PAGE.TITLE' | translate }}</h3>
    </header>

    <form [formGroup]="form" (ngSubmit)="submit()" class="form">
      <label class="field">
        <span>{{ 'CHANGE_PASSWORD_PAGE.CURRENT_PASSWORD' | translate }}</span>
        <input
          type="password"
          formControlName="currentPassword"
          placeholder="••••••"
          [class.invalid]="currentPassword.invalid && currentPassword.touched"
        />
        <small *ngIf="currentPassword.touched && currentPassword.hasError('required')">
          {{ 'CHANGE_PASSWORD_PAGE.ERROR_MIN_LENGTH' | translate }}
        </small>
      </label>

      <label class="field">
        <span>{{ 'CHANGE_PASSWORD_PAGE.NEW_PASSWORD' | translate }}</span>
        <input
          type="password"
          formControlName="newPassword"
          placeholder="••••••"
          [class.invalid]="newPassword.invalid && newPassword.touched"
        />
        <small *ngIf="newPassword.touched && newPassword.hasError('minlength')">
          {{ 'CHANGE_PASSWORD_PAGE.ERROR_MIN_LENGTH' | translate }}
        </small>
        <small *ngIf="newPassword.touched && newPassword.hasError('pattern')">
          {{ 'CHANGE_PASSWORD_PAGE.ERROR_PATTERN' | translate }}
        </small>
      </label>

      <label class="field">
        <span>{{ 'CHANGE_PASSWORD_PAGE.CONFIRM_PASSWORD' | translate }}</span>
        <input
          type="password"
          formControlName="confirmPassword"
          placeholder="••••••"
          [class.invalid]="form.hasError('passwordMismatch') && confirmPassword.touched"
        />
        <small *ngIf="form.touched && form.hasError('passwordMismatch')">
          {{ 'CHANGE_PASSWORD_PAGE.ERROR_MISMATCH' | translate }}
        </small>
      </label>

      <section class="actions">
        <button type="button" class="btn ghost" (click)="close()" [disabled]="busy">
          {{ 'CHANGE_PASSWORD_PAGE.CANCEL' | translate }}
        </button>
        <button type="submit" class="btn primary" [disabled]="form.invalid || busy">
          {{ 'CHANGE_PASSWORD_PAGE.SUBMIT' | translate }}
        </button>
        <p class="feedback success" *ngIf="feedback?.type === 'success'">{{ feedback?.message }}</p>
        <p class="feedback error" *ngIf="feedback?.type === 'error'">{{ feedback?.message }}</p>
      </section>
    </form>
  </div>
</div>
