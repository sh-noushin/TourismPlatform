<div class="sf-dropdown" [class.open]="isOpen()" [class.disabled]="disabled()">
  <button
    type="button"
    class="sf-dropdown-trigger"
    [attr.aria-label]="ariaLabel() ?? placeholder()"
    [attr.name]="name()"
    [attr.aria-expanded]="isOpen()"
    aria-haspopup="listbox"
    [disabled]="disabled()"
    (click)="toggle($event)"
  >
      <span class="sf-dropdown-label">
        @if (hasSelection) {
          <ng-container>{{ selectedLabel }}</ng-container>
        } @else {
          <ng-template>{{ placeholder() }}</ng-template>
        }
      </span>

    <span class="sf-dropdown-icon" aria-hidden="true"></span>
  </button>

  @if (isOpen()) {
    <ul
      class="sf-dropdown-menu"
      role="listbox"
      (click)="$event.stopPropagation()"
    >
      @for (let item of items(); trackBy: trackItem) {
        <li
          role="option"
          [attr.aria-selected]="item.value === value()"
          [class.selected]="item.value === value()"
          (click)="select(item, $event)"
        >
          <span>{{ item.label }}</span>
          @if (item.hint) {
            <span class="sf-dropdown-hint">{{ item.hint }}</span>
          }
        </li>
      }
    </ul>
  }
</div>
