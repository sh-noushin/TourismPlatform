<div class="dashboard-shell">
  <header class="topbar">
    <button type="button" class="burger" (click)="toggleSidebar()">&#9776;</button>
    <div class="topbar__brand">
      <div class="sidebar__logo">TP</div>
      <div>
        <p class="topbar__product">Tourism Platform</p>
        <p class="topbar__meta">Admin workspace</p>
      </div>
    </div>
    <div class="topbar__spacer"></div>
    <div class="topbar__actions">
      <user-menu
        [name]="displayName()"
        [role]="roleLabel()"
        [initials]="userInitials()"
        (changePassword)="onChangePassword()"
        (logout)="logout()"
      ></user-menu>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar" [class.collapsed]="!sidebarOpen()">
      <div class="sidebar__section">
        <p class="sidebar__section-title" *ngIf="sidebarOpen()">Main</p>
        <nav class="sidebar__nav">
          <ng-container *ngFor="let item of menuItems">
            <a
              class="sidebar__link"
              [routerLink]="item.path"
              routerLinkActive="active"
              (click)="canAccess(item.permission) ? openNav(item.path, item.label) : $event.preventDefault()"
              [attr.aria-disabled]="!canAccess(item.permission)"
            >
              <span class="nav-icon">{{ item.label[0] }}</span>
              <span class="nav-title" *ngIf="sidebarOpen()">{{ item.label }}</span>
            </a>
          </ng-container>
        </nav>
      </div>
      <div class="sidebar__footer" *ngIf="sidebarOpen()">
        <p class="sidebar__hint">Signed in as {{ displayName() }}</p>
      </div>
    </aside>

    <div class="main">
      <section class="hero">
        <div>
          <p class="hero__eyebrow">Control center</p>
          <h1 class="hero__title">Manage houses, tours, exchanges, and permissions</h1>
          <p class="hero__meta">Use the left menu to open modules. Tabs keep multiple screens visible.</p>
        </div>
        <div class="hero__actions">
          <ng-container *ngFor="let action of quickActions">
            <sf-button
              variant="outline"
              buttonType="button"
              *has-permission="action.permission"
              (click)="openNav(action.path, action.label)"
            >
              {{ action.label }}
            </sf-button>
          </ng-container>
        </div>
      </section>

      <sf-tabs></sf-tabs>

      <main class="dashboard-shell__content">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>
</div>
