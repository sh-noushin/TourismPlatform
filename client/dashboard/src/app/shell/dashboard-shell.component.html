<div class="dashboard-shell">
  <aside class="dashboard-shell__sidebar">
    <div class="sidebar__brand">
      <div class="sidebar__logo">TP</div>
      <div>
        <strong>Tourism Platform</strong>
        <span>Command center</span>
      </div>
    </div>
    <nav class="sidebar__nav">
      <a routerLink="houses" routerLinkActive="active" has-permission="'Houses.View'">
        <span class="sidebar__nav-icon">ğŸ </span>
        <span>Houses</span>
      </a>
      <a routerLink="tours" routerLinkActive="active" has-permission="'Tours.View'">
        <span class="sidebar__nav-icon">ğŸ§­</span>
        <span>Tours</span>
      </a>
      <a routerLink="users" routerLinkActive="active" has-permission="'Users.Manage'">
        <span class="sidebar__nav-icon">ğŸ‘¤</span>
        <span>Users</span>
      </a>
      <a routerLink="permissions" routerLinkActive="active" has-permission="'Users.Manage'">
        <span class="sidebar__nav-icon">ğŸ”</span>
        <span>Permissions</span>
      </a>
    </nav>
    <div class="sidebar__logout">
      <sf-button variant="ghost" buttonType="button" (click)="logout()">Logout</sf-button>
    </div>
  </aside>

  <div class="dashboard-shell__main">
    <header class="dashboard-shell__topbar">
      <div>
        <p class="topbar__eyebrow">Command Overview</p>
        <h1>
          Welcome back,
          <span *ngIf="auth.userEmail(); else superuserLabel">{{ auth.userEmail() }}</span>
        </h1>
        <ng-template #superuserLabel>
          <span>Superuser</span>
        </ng-template>
      </div>
      <div class="topbar__actions">
        <sf-searchbar placeholder="Search analytics" (valueChange)="searchTerm.set($event)"></sf-searchbar>
        <sf-button variant="ghost" buttonType="button" (click)="logout()">Logout</sf-button>
      </div>
    </header>

    <section class="dashboard-shell__overview">
      <div class="overview-grid">
        <ng-container *ngFor="let stat of overviewStats">
          <sf-card class="overview-card">
            <div class="overview-card__label">{{ stat.label }}</div>
            <div class="overview-card__value">{{ stat.value }}</div>
            <div class="overview-card__meta">{{ stat.meta }}</div>
            <span class="overview-card__trend">{{ stat.trend }}</span>
          </sf-card>
        </ng-container>
      </div>
    </section>

    <sf-tabs></sf-tabs>

    <main class="dashboard-shell__content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<sf-drawer [open]="drawerOpen()" (openChange)="drawerOpen.set($event)">
  <div class="drawer-panel">
    <div class="drawer-panel__header">
      <div>
        <h2>Filters</h2>
        <p>Adjust reporting scope</p>
      </div>
      <sf-button variant="ghost" buttonType="button" (click)="closeDrawer()">Close</sf-button>
    </div>
    <p class="drawer-panel__copy">Filters will go here once the API supports scoped views.</p>
  </div>
</sf-drawer>
