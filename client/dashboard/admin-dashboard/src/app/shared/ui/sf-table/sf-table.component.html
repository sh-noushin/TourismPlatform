<div class="sf-table-wrapper">
  <table class="sf-table">
    <thead>
      <tr>
        @for (column of columns; track column.key) {
          <th [style.width]="column.width">
            @if (column.sortable) {
              <button type="button" class="sort-button" (click)="emitSort(column.key)">
                {{ column.label }}
              </button>
            } @else {
              <span>{{ column.label }}</span>
            }
          </th>
        }

        @if (actions.length) {
          <th class="actions-header">Actions</th>
        }
      </tr>
    </thead>

    <tbody>
      @if (loading) {
        <tr>
          <td [attr.colspan]="columns.length + (actions.length ? 1 : 0)">
            <p>Loading...</p>
          </td>
        </tr>
      } @else {
        @for (row of data; track $index) {
          <tr>
            @for (column of columns; track column.key) {
              <td>{{ getCellValue(column, row) }}</td>
            }

            @if (actions.length) {
              <td class="actions-column">
                @for (actionConfig of actions; track $index) {
                  <sf-button
                    variant="outline"
                    size="sm"
                    (click)="triggerAction(actionConfig, row)"
                  >
                    {{ actionConfig.label }}
                  </sf-button>
                }
              </td>
            }
          </tr>
        }

        @if (!data.length) {
          <tr>
            <td [attr.colspan]="columns.length + (actions.length ? 1 : 0)">
              <p class="empty">No records found.</p>
            </td>
          </tr>
        }
      }
    </tbody>
  </table>

  @if (totalCount > pageSize) {
    <div class="sf-table__pagination">
      <button class="page" (click)="changePage(-1)">Previous</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button class="page" (click)="changePage(1)">Next</button>
    </div>
  }
</div>
